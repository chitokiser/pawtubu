{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Y700-17ISK\\\\Desktop\\\\project\\\\Paw\\\\pawtubu_front\\\\src\\\\components\\\\Header.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { AppBar, Toolbar, Typography, InputBase, Button, IconButton } from '@mui/material';\nimport { Search as SearchIcon } from '@mui/icons-material';\nimport { ethers } from 'ethers';\nimport { useNavigate } from 'react-router-dom';\n\n// Simple API functions for interaction with backend\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst api = {\n  getNonce: walletAddress => fetch('http://localhost:5000/api/auth/request-nonce', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      walletAddress\n    })\n  }).then(res => res.json()),\n  verifySignature: (walletAddress, signature) => fetch('http://localhost:5000/api/auth/verify', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      walletAddress,\n      signature\n    })\n  }).then(res => res.json())\n};\nfunction Header() {\n  _s();\n  const [userAddress, setUserAddress] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const navigate = useNavigate();\n  const handleLogin = async () => {\n    if (!window.ethereum) {\n      alert('Please install MetaMask!');\n      return;\n    }\n    try {\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      await provider.send(\"eth_requestAccounts\", []);\n      const signer = provider.getSigner();\n      const walletAddress = await signer.getAddress();\n\n      // Get nonce from backend\n      const {\n        nonce\n      } = await api.getNonce(walletAddress);\n      const message = `Signing with a one-time nonce: ${nonce}`;\n\n      // Sign the message\n      const signature = await signer.signMessage(message);\n\n      // Verify signature and get token\n      const {\n        token\n      } = await api.verifySignature(walletAddress, signature);\n      if (token) {\n        localStorage.setItem('pawtubu-token', token);\n        setUserAddress(walletAddress);\n        alert('Login successful!');\n      } else {\n        alert('Login failed. Please try again.');\n      }\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      alert('An error occurred during login.');\n    }\n  };\n  const handleSearch = () => {\n    if (searchTerm.trim()) {\n      navigate(`/search/${searchTerm.trim()}`);\n    } else {\n      navigate('/'); // Go to home if search term is empty\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter') {\n      handleSearch();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(AppBar, {\n    position: \"fixed\",\n    children: /*#__PURE__*/_jsxDEV(Toolbar, {\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        noWrap: true,\n        component: \"div\",\n        sx: {\n          flexGrow: 1,\n          display: {\n            xs: 'none',\n            sm: 'block'\n          }\n        },\n        children: \"Pawtubu\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'relative',\n          borderRadius: '4px',\n          backgroundColor: 'rgba(255, 255, 255, 0.15)',\n          marginRight: '16px',\n          width: 'auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '0 16px',\n            height: '100%',\n            position: 'absolute',\n            pointerEvents: 'none',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center'\n          },\n          children: /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(InputBase, {\n          placeholder: \"Search\\u2026\",\n          style: {\n            color: 'inherit',\n            padding: '8px 8px 8px 50px'\n          },\n          inputProps: {\n            'aria-label': 'search'\n          },\n          value: searchTerm,\n          onChange: e => setSearchTerm(e.target.value),\n          onKeyPress: handleKeyPress\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"inherit\",\n        onClick: handleSearch,\n        children: /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), userAddress ? /*#__PURE__*/_jsxDEV(Typography, {\n        noWrap: true,\n        children: `${userAddress.substring(0, 6)}...${userAddress.substring(userAddress.length - 4)}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Button, {\n        color: \"inherit\",\n        variant: \"outlined\",\n        onClick: handleLogin,\n        children: \"Connect Wallet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n_s(Header, \"3XR5DI+zxbYho1CKd18wCme+q2U=\", false, function () {\n  return [useNavigate];\n});\n_c = Header;\nexport default Header;\nvar _c;\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"names":["React","useState","AppBar","Toolbar","Typography","InputBase","Button","IconButton","Search","SearchIcon","ethers","useNavigate","jsxDEV","_jsxDEV","api","getNonce","walletAddress","fetch","method","headers","body","JSON","stringify","then","res","json","verifySignature","signature","Header","_s","userAddress","setUserAddress","searchTerm","setSearchTerm","navigate","handleLogin","window","ethereum","alert","provider","providers","Web3Provider","send","signer","getSigner","getAddress","nonce","message","signMessage","token","localStorage","setItem","error","console","handleSearch","trim","handleKeyPress","e","key","position","children","variant","noWrap","component","sx","flexGrow","display","xs","sm","fileName","_jsxFileName","lineNumber","columnNumber","style","borderRadius","backgroundColor","marginRight","width","padding","height","pointerEvents","alignItems","justifyContent","placeholder","color","inputProps","value","onChange","target","onKeyPress","onClick","substring","length","_c","$RefreshReg$"],"sources":["C:/Users/Y700-17ISK/Desktop/project/Paw/pawtubu_front/src/components/Header.js"],"sourcesContent":["\nimport React, { useState } from 'react';\nimport { AppBar, Toolbar, Typography, InputBase, Button, IconButton } from '@mui/material';\nimport { Search as SearchIcon } from '@mui/icons-material';\nimport { ethers } from 'ethers';\nimport { useNavigate } from 'react-router-dom';\n\n// Simple API functions for interaction with backend\nconst api = {\n  getNonce: (walletAddress) => fetch('http://localhost:5000/api/auth/request-nonce', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ walletAddress }),\n  }).then(res => res.json()),\n\n  verifySignature: (walletAddress, signature) => fetch('http://localhost:5000/api/auth/verify', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ walletAddress, signature }),\n  }).then(res => res.json()),\n};\n\nfunction Header() {\n  const [userAddress, setUserAddress] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const navigate = useNavigate();\n\n  const handleLogin = async () => {\n    if (!window.ethereum) {\n      alert('Please install MetaMask!');\n      return;\n    }\n\n    try {\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      await provider.send(\"eth_requestAccounts\", []);\n      const signer = provider.getSigner();\n      const walletAddress = await signer.getAddress();\n\n      // Get nonce from backend\n      const { nonce } = await api.getNonce(walletAddress);\n      const message = `Signing with a one-time nonce: ${nonce}`;\n\n      // Sign the message\n      const signature = await signer.signMessage(message);\n\n      // Verify signature and get token\n      const { token } = await api.verifySignature(walletAddress, signature);\n\n      if (token) {\n        localStorage.setItem('pawtubu-token', token);\n        setUserAddress(walletAddress);\n        alert('Login successful!');\n      } else {\n        alert('Login failed. Please try again.');\n      }\n\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      alert('An error occurred during login.');\n    }\n  };\n\n  const handleSearch = () => {\n    if (searchTerm.trim()) {\n      navigate(`/search/${searchTerm.trim()}`);\n    } else {\n      navigate('/'); // Go to home if search term is empty\n    }\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      handleSearch();\n    }\n  };\n\n  return (\n    <AppBar position=\"fixed\">\n      <Toolbar>\n        <Typography variant=\"h6\" noWrap component=\"div\" sx={{ flexGrow: 1, display: { xs: 'none', sm: 'block' } }}>\n          Pawtubu\n        </Typography>\n        <div style={{ position: 'relative', borderRadius: '4px', backgroundColor: 'rgba(255, 255, 255, 0.15)', marginRight: '16px', width: 'auto' }}>\n          <div style={{ padding: '0 16px', height: '100%', position: 'absolute', pointerEvents: 'none', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n            <SearchIcon />\n          </div>\n          <InputBase\n            placeholder=\"Searchâ€¦\"\n            style={{ color: 'inherit', padding: '8px 8px 8px 50px' }}\n            inputProps={{ 'aria-label': 'search' }}\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            onKeyPress={handleKeyPress}\n          />\n        </div>\n        <IconButton color=\"inherit\" onClick={handleSearch}>\n          <SearchIcon />\n        </IconButton>\n        {userAddress ? (\n          <Typography noWrap>{`${userAddress.substring(0, 6)}...${userAddress.substring(userAddress.length - 4)}`}</Typography>\n        ) : (\n          <Button color=\"inherit\" variant=\"outlined\" onClick={handleLogin}>\n            Connect Wallet\n          </Button>\n        )}\n      </Toolbar>\n    </AppBar>\n  );\n}\n\nexport default Header;\n"],"mappings":";;AACA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,MAAM,EAAEC,OAAO,EAAEC,UAAU,EAAEC,SAAS,EAAEC,MAAM,EAAEC,UAAU,QAAQ,eAAe;AAC1F,SAASC,MAAM,IAAIC,UAAU,QAAQ,qBAAqB;AAC1D,SAASC,MAAM,QAAQ,QAAQ;AAC/B,SAASC,WAAW,QAAQ,kBAAkB;;AAE9C;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,GAAG,GAAG;EACVC,QAAQ,EAAGC,aAAa,IAAKC,KAAK,CAAC,8CAA8C,EAAE;IACjFC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEN;IAAc,CAAC;EACxC,CAAC,CAAC,CAACO,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC;EAE1BC,eAAe,EAAEA,CAACV,aAAa,EAAEW,SAAS,KAAKV,KAAK,CAAC,uCAAuC,EAAE;IAC5FC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEN,aAAa;MAAEW;IAAU,CAAC;EACnD,CAAC,CAAC,CAACJ,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,CAAC,CAAC;AAC3B,CAAC;AAED,SAASG,MAAMA,CAAA,EAAG;EAAAC,EAAA;EAChB,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAG9B,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAAC+B,UAAU,EAAEC,aAAa,CAAC,GAAGhC,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAMiC,QAAQ,GAAGvB,WAAW,CAAC,CAAC;EAE9B,MAAMwB,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC9B,IAAI,CAACC,MAAM,CAACC,QAAQ,EAAE;MACpBC,KAAK,CAAC,0BAA0B,CAAC;MACjC;IACF;IAEA,IAAI;MACF,MAAMC,QAAQ,GAAG,IAAI7B,MAAM,CAAC8B,SAAS,CAACC,YAAY,CAACL,MAAM,CAACC,QAAQ,CAAC;MACnE,MAAME,QAAQ,CAACG,IAAI,CAAC,qBAAqB,EAAE,EAAE,CAAC;MAC9C,MAAMC,MAAM,GAAGJ,QAAQ,CAACK,SAAS,CAAC,CAAC;MACnC,MAAM5B,aAAa,GAAG,MAAM2B,MAAM,CAACE,UAAU,CAAC,CAAC;;MAE/C;MACA,MAAM;QAAEC;MAAM,CAAC,GAAG,MAAMhC,GAAG,CAACC,QAAQ,CAACC,aAAa,CAAC;MACnD,MAAM+B,OAAO,GAAG,kCAAkCD,KAAK,EAAE;;MAEzD;MACA,MAAMnB,SAAS,GAAG,MAAMgB,MAAM,CAACK,WAAW,CAACD,OAAO,CAAC;;MAEnD;MACA,MAAM;QAAEE;MAAM,CAAC,GAAG,MAAMnC,GAAG,CAACY,eAAe,CAACV,aAAa,EAAEW,SAAS,CAAC;MAErE,IAAIsB,KAAK,EAAE;QACTC,YAAY,CAACC,OAAO,CAAC,eAAe,EAAEF,KAAK,CAAC;QAC5ClB,cAAc,CAACf,aAAa,CAAC;QAC7BsB,KAAK,CAAC,mBAAmB,CAAC;MAC5B,CAAC,MAAM;QACLA,KAAK,CAAC,iCAAiC,CAAC;MAC1C;IAEF,CAAC,CAAC,OAAOc,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,cAAc,EAAEA,KAAK,CAAC;MACpCd,KAAK,CAAC,iCAAiC,CAAC;IAC1C;EACF,CAAC;EAED,MAAMgB,YAAY,GAAGA,CAAA,KAAM;IACzB,IAAItB,UAAU,CAACuB,IAAI,CAAC,CAAC,EAAE;MACrBrB,QAAQ,CAAC,WAAWF,UAAU,CAACuB,IAAI,CAAC,CAAC,EAAE,CAAC;IAC1C,CAAC,MAAM;MACLrB,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;IACjB;EACF,CAAC;EAED,MAAMsB,cAAc,GAAIC,CAAC,IAAK;IAC5B,IAAIA,CAAC,CAACC,GAAG,KAAK,OAAO,EAAE;MACrBJ,YAAY,CAAC,CAAC;IAChB;EACF,CAAC;EAED,oBACEzC,OAAA,CAACX,MAAM;IAACyD,QAAQ,EAAC,OAAO;IAAAC,QAAA,eACtB/C,OAAA,CAACV,OAAO;MAAAyD,QAAA,gBACN/C,OAAA,CAACT,UAAU;QAACyD,OAAO,EAAC,IAAI;QAACC,MAAM;QAACC,SAAS,EAAC,KAAK;QAACC,EAAE,EAAE;UAAEC,QAAQ,EAAE,CAAC;UAAEC,OAAO,EAAE;YAAEC,EAAE,EAAE,MAAM;YAAEC,EAAE,EAAE;UAAQ;QAAE,CAAE;QAAAR,QAAA,EAAC;MAE3G;QAAAS,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAY,CAAC,eACb3D,OAAA;QAAK4D,KAAK,EAAE;UAAEd,QAAQ,EAAE,UAAU;UAAEe,YAAY,EAAE,KAAK;UAAEC,eAAe,EAAE,2BAA2B;UAAEC,WAAW,EAAE,MAAM;UAAEC,KAAK,EAAE;QAAO,CAAE;QAAAjB,QAAA,gBAC1I/C,OAAA;UAAK4D,KAAK,EAAE;YAAEK,OAAO,EAAE,QAAQ;YAAEC,MAAM,EAAE,MAAM;YAAEpB,QAAQ,EAAE,UAAU;YAAEqB,aAAa,EAAE,MAAM;YAAEd,OAAO,EAAE,MAAM;YAAEe,UAAU,EAAE,QAAQ;YAAEC,cAAc,EAAE;UAAS,CAAE;UAAAtB,QAAA,eAC9J/C,OAAA,CAACJ,UAAU;YAAA4D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACX,CAAC,eACN3D,OAAA,CAACR,SAAS;UACR8E,WAAW,EAAC,cAAS;UACrBV,KAAK,EAAE;YAAEW,KAAK,EAAE,SAAS;YAAEN,OAAO,EAAE;UAAmB,CAAE;UACzDO,UAAU,EAAE;YAAE,YAAY,EAAE;UAAS,CAAE;UACvCC,KAAK,EAAEtD,UAAW;UAClBuD,QAAQ,EAAG9B,CAAC,IAAKxB,aAAa,CAACwB,CAAC,CAAC+B,MAAM,CAACF,KAAK,CAAE;UAC/CG,UAAU,EAAEjC;QAAe;UAAAa,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5B,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,eACN3D,OAAA,CAACN,UAAU;QAAC6E,KAAK,EAAC,SAAS;QAACM,OAAO,EAAEpC,YAAa;QAAAM,QAAA,eAChD/C,OAAA,CAACJ,UAAU;UAAA4D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACJ,CAAC,EACZ1C,WAAW,gBACVjB,OAAA,CAACT,UAAU;QAAC0D,MAAM;QAAAF,QAAA,EAAE,GAAG9B,WAAW,CAAC6D,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM7D,WAAW,CAAC6D,SAAS,CAAC7D,WAAW,CAAC8D,MAAM,GAAG,CAAC,CAAC;MAAE;QAAAvB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAa,CAAC,gBAErH3D,OAAA,CAACP,MAAM;QAAC8E,KAAK,EAAC,SAAS;QAACvB,OAAO,EAAC,UAAU;QAAC6B,OAAO,EAAEvD,WAAY;QAAAyB,QAAA,EAAC;MAEjE;QAAAS,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CACT;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACM;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACJ,CAAC;AAEb;AAAC3C,EAAA,CAvFQD,MAAM;EAAA,QAGIjB,WAAW;AAAA;AAAAkF,EAAA,GAHrBjE,MAAM;AAyFf,eAAeA,MAAM;AAAC,IAAAiE,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}